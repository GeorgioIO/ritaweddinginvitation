<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Chahid Frangieh & Rita Abou Nader – Wedding Invitation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="bg-fixed"></div>
    <div id="intro-overlay">
      <div class="intro-images">
        <img id="intro-invitation-img" src="images/intro-invitation.jpg" alt="Intro Invitation" style="position:absolute;top:0;left:0;width:100vw;height:100vh;object-fit:cover;z-index:0;opacity:1;transition:opacity 0.7s;" />
      </div>
      <div class="intro-content" style="position:relative;z-index:2;">
        <h1 class="intro-title">
          Welcome to Chahid Frangieh and Rita Abou Nader Wedding Invitation
        </h1>

        <div class="intro-buttons">
          <button id="open-with-music">Open with Music</button>
          <button id="open-without-music">Open without Music</button>
        </div>
      </div>
    </div>
    <audio
      id="wedding-music"
      src="Ed Sheeran - Perfect.mp3"
      loop
    ></audio>
    
    <div class="main-content">
      <div class="card-invitation-slide">
        <img src="images/card-invitation.jpg" alt="Card Invitation" />
      </div>
      <div class="wedding-ceremony-slide">
        <h2 class="slide-title">Wedding Ceremony</h2>
        <div class="ceremony-info">
          <div class="ceremony-detail">
            <span class="ceremony-icon">
              <!-- Pin SVG -->
              <svg
                width="40"
                height="40"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M12 21s-6-5.686-6-10A6 6 0 1 1 18 11c0 4.314-6 10-6 10z"
                  stroke="#3C4C5A"
                  stroke-width="2.5"
                  fill="none"
                />
                <circle
                  cx="12"
                  cy="11"
                  r="2.5"
                  stroke="#3C4C5A"
                  stroke-width="2.5"
                  fill="none"
                />
              </svg>
            </span>
            <span class="ceremony-text">Saint Joseph - Church</span>
          </div>
          <a
            class="ceremony-map-btn"
            href="https://maps.app.goo.gl/UpTLVMnWVVLq2B3F8"
            target="_blank"
            rel="noopener"
            >Locate on Map</a
          >
          <div class="ceremony-detail">
            <span class="ceremony-icon">
              <!-- Clock SVG -->
              <svg
                width="40"
                height="40"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <circle
                  cx="12"
                  cy="12"
                  r="10"
                  stroke="#3C4C5A"
                  stroke-width="2.5"
                  fill="none"
                />
                <path
                  d="M12 7v5l3 2"
                  stroke="#3C4C5A"
                  stroke-width="2.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
            </span>
            <span class="ceremony-text"> 6:30 PM </span>
            <span class="ceremony-timezone">(Beirut Time)</span>
          </div>
        </div>
      </div>
      <div class="wedding-party-slide">
        <h2 class="slide-title">Wedding Party</h2>
        <div class="ceremony-info">
          <div class="ceremony-detail">
            <span class="ceremony-icon">
              <!-- Pin SVG -->
              <svg
                width="40"
                height="40"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M12 21s-6-5.686-6-10A6 6 0 1 1 18 11c0 4.314-6 10-6 10z"
                  stroke="#3C4C5A"
                  stroke-width="2.5"
                  fill="none"
                />
                <circle
                  cx="12"
                  cy="11"
                  r="2.5"
                  stroke="#3C4C5A"
                  stroke-width="2.5"
                  fill="none"
                />
              </svg>
            </span>
            <span class="ceremony-text">
              Jupiter - The Royal Venue<br />Bnachii Lake, Lebanon
            </span>
          </div>
          <a
            class="ceremony-map-btn"
            href="https://maps.app.goo.gl/UN8aY7ppB9j6M6Uq9"
            target="_blank"
            rel="noopener"
            >Locate on Map</a
          >
          <div class="ceremony-detail">
            <span class="ceremony-icon">
              <!-- Clock SVG -->
              <svg
                width="40"
                height="40"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <circle
                  cx="12"
                  cy="12"
                  r="10"
                  stroke="#3C4C5A"
                  stroke-width="2.5"
                  fill="none"
                />
                <path
                  d="M12 7v5l3 2"
                  stroke="#3C4C5A"
                  stroke-width="2.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
            </span>
            <span class="ceremony-text"> 8:00 PM </span>
            <span class="ceremony-timezone">(Beirut Time)</span>
          </div>
        </div>
      </div>
      <div class="reservation-slide">
        <h2 class="slide-title">Be Our Guest</h2>
        <p class="reservation-deadline">Please reply before August 20, 2025</p>
        <form action="" id="reservation-form" autocomplete="off">
          <div class="input" id="attending">
            <label>Are you attending?</label>
            <div class="attending-selection-container">
              <div class="attending-radio-container">
                <input
                  type="radio"
                  name="attending"
                  id="attending-yes"
                  value="yes"
                  hidden
                />
                <label for="attending-yes" class="heart-label">
                  <div class="heart"></div>
                  <p>Yes Attending</p>
                </label>
              </div>
              <div class="attending-radio-container">
                <input
                  type="radio"
                  name="attending"
                  id="attending-no"
                  value="no"
                  hidden
                />
                <label for="attending-no" class="heart-label">
                  <div class="heart"></div>
                  <p>Not Attending</p>
                </label>
              </div>
            </div>
          </div>
          <div class="input" id="guest-name">
            <label for="guestName">Your Name <span class="asterisk">*</span></label>
            <input type="text" name="guestName" id="guestName" required placeholder="Enter your full name" />
          </div>
          
          <div class="input" id="persons">
            <label for="persons-select">Number of persons <span class="asterisk">*</span></label>
            <select id="persons-select" placeholder="Select number of persons">
              <option value="None">None</option>
              <option value="1">1</option>
              <option value="2">2</option>
            </select>
          </div>
          <div class="input" id="phone-number">
            <label for="phoneNumber">Phone number <span class="asterisk">*</span></label>
            <input type="text" name="phoneNumber" id="phoneNumber" required placeholder="Enter your phone number" />
          </div>
          <div class="input">
            <textarea id="loveWishes" placeholder="Share your love & wishes"></textarea>
          </div>
          <button type="submit" id="rsvp-btn">RSVP</button>
        </form>

      </div>
    </div>
    <button id="music-tone" class="music-tone" aria-label="Toggle music">
      <svg
        width="40"
        height="40"
        viewBox="0 0 28 28"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M12 3v10.55A4 4 0 1 0 14 17V7h4V3h-6z"
          stroke="currentColor"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    </button>
    <script>
      const yesRadio = document.getElementById("attending-yes");
      const noRadio = document.getElementById("attending-no");
      const personsSelect = document.getElementById("persons-select");
      const musicTone = document.getElementById("music-tone");
      musicTone.style.display = "none";

      function updatePersonsState() {
        if (noRadio.checked) {
          personsSelect.value = "None";
          personsSelect.disabled = true;
        } else {
          personsSelect.disabled = false;
        }
      }

      yesRadio.addEventListener("change", updatePersonsState);
      noRadio.addEventListener("change", updatePersonsState);

      window.addEventListener("DOMContentLoaded", updatePersonsState);

      // Music and intro overlay logic
      const overlay = document.getElementById("intro-overlay");
      const openWithMusic = document.getElementById("open-with-music");
      const openWithoutMusic = document.getElementById("open-without-music");
      const audio = document.getElementById("wedding-music");
      let musicEnabled = false;

      function hideOverlay() {
        overlay.classList.add("hide");
        setTimeout(() => {
          overlay.style.display = "none";
          // Show card-invitation overlay
          const cardOverlay = document.getElementById('card-invitation-overlay');
          if (cardOverlay) {
            cardOverlay.style.display = 'flex';
            cardOverlay.style.opacity = '1';
            setTimeout(() => {
              cardOverlay.style.opacity = '0';
              setTimeout(() => {
                cardOverlay.style.display = 'none';
              }, 700);
            }, 6000); // Show for 2 seconds
          }
        }, 600);
      }

      // Remove old music toggle logic and add new for music-fab
      // musicFab.style.display = 'none'; // This line is no longer needed
      overlay.addEventListener("transitionend", () => {
        musicTone.style.display = "block";
      });
      openWithMusic.addEventListener("click", () => {
        musicTone.classList.add("playing");
        audio.volume = 0.7;
        audio.play();
        hideOverlay();
      });
      openWithoutMusic.addEventListener("click", () => {
        musicTone.classList.remove("playing");
        audio.pause();
        hideOverlay();
      });
      musicTone.addEventListener("click", () => {
        if (musicTone.classList.contains("playing")) {
          musicTone.classList.remove("playing");
          audio.pause();
        } else {
          musicTone.classList.add("playing");
          audio.play();
        }
      });

      // Reservation form validation and RSVP button shake
      const reservationForm = document.getElementById('reservation-form');
      const guestName = document.getElementById('guestName');
      const phoneNumber = document.getElementById('phoneNumber');
      // const personsSelect = document.getElementById('persons-select'); // Remove this line
      const attendingYes = document.getElementById('attending-yes');
      const attendingNo = document.getElementById('attending-no');
      const rsvpBtn = document.getElementById('rsvp-btn');

      function updatePersonsState() {
        if (attendingNo.checked) {
          personsSelect.value = "None";
          personsSelect.disabled = true;
        } else {
          personsSelect.disabled = false;
        }
      }
      yesRadio.addEventListener("change", updatePersonsState);
      noRadio.addEventListener("change", updatePersonsState);
      window.addEventListener("DOMContentLoaded", updatePersonsState);

      // Shake RSVP button on field focus
      reservationForm.querySelectorAll('input, select, textarea').forEach(el => {
        el.addEventListener('focus', () => {
          rsvpBtn.classList.add('shake');
          setTimeout(() => rsvpBtn.classList.remove('shake'), 500);
        });
      });

      // Error bar logic
      // const errorBar = document.getElementById('form-error-bar'); // This line is no longer needed
      // let errorBarTimeout = null; // This line is no longer needed
      // function showErrorBar(msg) { // This line is no longer needed
      //   errorBar.textContent = msg; // This line is no longer needed
      //   errorBar.classList.add('show'); // This line is no longer needed
      //   if (errorBarTimeout) clearTimeout(errorBarTimeout); // This line is no longer needed
      //   errorBarTimeout = setTimeout(() => { // This line is no longer needed
      //     errorBar.classList.remove('show'); // This line is no longer needed
      //   }, 3000); // This line is no longer needed
      // } // This line is no longer needed
      reservationForm.addEventListener('submit', function(e) {
        let valid = true;
        let errors = [];
        const attending = attendingYes.checked ? 'yes' : (attendingNo.checked ? 'no' : '');
        if (!guestName.value.trim()) {
          valid = false;
          errors.push('Name is required.');
        }
        if (!phoneNumber.value.trim()) {
          valid = false;
          errors.push('Phone number is required.');
        }
        if (attending === 'yes') {
          if (personsSelect.value === 'None') {
            valid = false;
            errors.push('Number of persons is required if attending.');
          }
        }
        if (!valid) {
          e.preventDefault();
          // showErrorBar(errors.join(' ')); // This line is no longer needed
        }
      });
    </script>
  </body>
</html>
